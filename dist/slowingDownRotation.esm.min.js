const t={currentPlayCount:0,playCount:0,currentIndex:-1,stopIndex:null,slowDownStartindex:null,isSlowdown:!1,isPlay:!1,isStop:!1,countTimer:null},e={wrapperElement:null,targetElement:null,itemElements:null,speed:100,startIndex:2,stopIndex:0,playCount:3,autoStart:!1,reverse:!1,stopCallback:()=>{},startCallback:()=>{},slowDownCallback:()=>{}};class n{constructor(t){this.updateOption(t)}init(){const{options:t}=this;t.autoStart&&this.start()}updateOption(n){Object.assign(this,{options:Object.assign({},t,e,n)}),this.options.reverse?this.options.currentIndex=n.startIndex?n.startIndex:e.startIndex:this.options.currentIndex=n.startIndex?n.startIndex-1:e.startIndex-1}start(){const{options:t}=this;t.countTimer&&clearTimeout(t.countTimer),t.isPlay||(t.isPlay=!0),t.startCallback(),this.roll(t.playCount,t.speed)}stop(){const{options:t}=this;t.isSlowdown||(t.countTimer&&clearTimeout(t.countTimer),t.stopCallback(),t.itemElements.length>=t.stopIndex&&t.stopIndex>=0&&(t.isSlowdown=!0,t.currentPlayCount=0,this.roll(Math.max(1,Math.ceil(20/t.itemElements.length)),t.speed),t.slowDownCallback()))}reset(){const{options:e}=this;e.countTimer&&(clearTimeout(e.countTimer),e.countTimer=null),e.playCount=t.playCount,e.currentIndex=e.startIndex-1,e.slowDownStartindex=t.slowDownStartindex,e.isSlowdown=t.isSlowdown,e.isStop=t.isStop}roll(t,e){const{options:n}=this;if(n.isSlowdown){if(n.currentPlayCount>t&&n.currentIndex===n.stopIndex)return void this.reset();e=Math.floor(e+t*(n.currentIndex*n.currentPlayCount))}else if(n.currentPlayCount===t)return void this.stop();this.controllIndex(),n.countTimer=setTimeout((()=>{this.roll(t,e)}),e)}controllIndex(){const{options:t}=this,e={xPrev:null,prev:null,current:null,next:null,xNext:null};t.reverse?(t.currentIndex--,-1===t.currentIndex&&(t.currentIndex=t.itemElements.length-1),0===t.currentIndex&&t.currentPlayCount++,e.prev=t.currentIndex-1,e.prev<0&&(e.prev=t.itemElements.length-1),e.next=t.currentIndex+1,e.next===t.itemElements.length&&(e.next=0),e.next<0&&(e.next=t.itemElements.length-1),e.xNext=e.next+1,e.xNext===t.itemElements.length&&(e.xNext=0),e.current=t.currentIndex):(t.currentIndex++,t.currentIndex===t.itemElements.length&&(t.currentIndex=0,t.currentPlayCount++),e.prev=t.currentIndex-1,e.prev<0&&(e.prev=t.itemElements.length-1),e.xPrev=e.prev-1,e.xPrev<0&&(e.xPrev=t.itemElements.length-1),e.next=t.currentIndex+1,e.next===t.itemElements.length&&(e.next=0),e.current=t.currentIndex),this.output(e)}output(t){const{options:e}=this,{xPrev:n,xNext:s,prev:r,current:l,next:o}=t,i="sdr-active",a="sdr-prev",u="sdr-next";e.reverse?(e.itemElements[l].classList.remove(a),e.itemElements[o].classList.remove(i),e.itemElements[s].classList.remove(u),e.itemElements[l].classList.add(i),e.itemElements[o].classList.add(u),e.itemElements[r].classList.add(a)):(e.itemElements[n].classList.remove(a),e.itemElements[r].classList.add(a),e.itemElements[r].classList.remove(i),e.itemElements[l].classList.add(i),e.itemElements[l].classList.remove(u),e.itemElements[o].classList.add(u))}}export{n as default};
//# sourceMappingURL=slowingDownRotation.esm.min.js.map
